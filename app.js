const { Client, LocalAuth } = require('whatsapp-web.js');
const qrcode_terminal = require('qrcode-terminal');

// Initialize WhatsApp Client
// const client = new Client({
//     authStrategy: new LocalAuth() // This will handle storing and reusing your session
//     puppeteer: {
//         executablePath: chromium.path // Ð£ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð¿ÑƒÑ‚ÑŒ Ðº ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ð¾Ð¼Ñƒ Chromium
//     }
// });

const client = new Client({
    puppeteer: {
        headless: true,
        args: ['--no-sandbox'],
        authStrategy: new LocalAuth()
    }
});

// Client is ready to start handling messages
client.on('ready', () => {
    console.log('WhatsApp bot is ready!');
});

// Store user states
let userStates = { state: ' ', question: ' ' };
let questionnaireAnswer = {};
let expertHelpAnswer = {};

const questions = [
    "ÐšÐ°ÐºÐ¾Ð²Ð° Ð¾ÑÐ½Ð¾Ð²Ð½Ð°Ñ Ñ†ÐµÐ»ÑŒ Ð²Ð°ÑˆÐµÐ¹ Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ†Ð¸Ð¸ Ð² Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð½Ð° Ð‘Ð°Ð»Ð¸?",
    "ÐšÐ°ÐºÐ¸Ð¼ Ñ‚Ð¸Ð¿Ð¾Ð¼ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð²Ñ‹ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÑƒÐµÑ‚ÐµÑÑŒ?",
    "ÐšÐ°ÐºÐ¾Ð² Ð²Ð°Ñˆ Ð±ÑŽÐ´Ð¶ÐµÑ‚ Ð½Ð° Ð¿Ð¾ÐºÑƒÐ¿ÐºÑƒ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸?",
    "Ð’ ÐºÐ°ÐºÐ¾Ð¼ Ñ€Ð°Ð¹Ð¾Ð½Ðµ Ð‘Ð°Ð»Ð¸ Ð²Ñ‹ Ð¿Ñ€ÐµÐ´Ð¿Ð¾Ñ‡Ð¸Ñ‚Ð°ÐµÑ‚Ðµ Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ?",
    "ÐšÐ°ÐºÑƒÑŽ Ð¾Ð¶Ð¸Ð´Ð°ÐµÐ¼ÑƒÑŽ Ð´Ð¾Ñ…Ð¾Ð´Ð½Ð¾ÑÑ‚ÑŒ Ð¸Ð»Ð¸ Ð²Ñ‹Ð³Ð¾Ð´Ñƒ Ð²Ñ‹ Ð¿Ð»Ð°Ð½Ð¸Ñ€ÑƒÐµÑ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¾Ñ‚ Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ†Ð¸Ð¹ Ð² Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð½Ð° Ð‘Ð°Ð»Ð¸?",
    "ÐšÐ¾Ð³Ð´Ð° Ð²Ñ‹ Ð¿Ð»Ð°Ð½Ð¸Ñ€ÑƒÐµÑ‚Ðµ ÑÐ¾Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ Ð¿Ð¾ÐºÑƒÐ¿ÐºÑƒ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸?",
    "Ð•ÑÑ‚ÑŒ Ð»Ð¸ Ñƒ Ð²Ð°Ñ ÐºÐ°ÐºÐ¸Ðµ-Ð»Ð¸Ð±Ð¾ Ð¾ÑÐ¾Ð±Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¸Ð»Ð¸ Ð¿Ñ€ÐµÐ´Ð¿Ð¾Ñ‡Ñ‚ÐµÐ½Ð¸Ñ Ðº Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸, ÐºÐ¾Ñ‚Ð¾Ñ€ÑƒÑŽ Ð²Ñ‹ Ð¸Ñ‰ÐµÑ‚Ðµ?",
    "ÐœÐµÑ‚Ð¾Ð´ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹?",
    "ÐšÐ°Ðº Ð²Ñ‹ Ñ…Ð¾Ñ‚ÐµÐ»Ð¸ Ð±Ñ‹ Ð¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÑÑ‚Ð¸ Ð¾Ð¿Ð»Ð°Ñ‚Ñƒ?",
    "ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÑƒÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÐµ Ð¿Ð¾Ð»Ð½Ð¾Ðµ Ð¸Ð¼Ñ:",
    "ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÑƒÐºÐ°Ð¶Ð¸Ñ‚Ðµ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð½Ñ‹Ð¹ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°, ÑÐ²ÑÐ·Ð°Ð½Ð½Ñ‹Ð¹ Ñ Ð¼ÐµÑÑÐµÐ½Ð´Ð¶ÐµÑ€Ð°Ð¼Ð¸:"
];


const options = [
    ["Ð”Ð»Ñ Ð»Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾Ð¶Ð¸Ð²Ð°Ð½Ð¸Ñ", "Ð”Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð´Ð¾Ñ…Ð¾Ð´Ð° Ð¾Ñ‚ Ð°Ñ€ÐµÐ½Ð´Ñ‹", "Ð”Ð»Ñ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸ Ñ Ð¿Ñ€Ð¸Ð±Ñ‹Ð»ÑŒÑŽ", "Ð”Ñ€ÑƒÐ³Ð¾Ðµ (Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÑƒÑ‚Ð¾Ñ‡Ð½Ð¸Ñ‚Ðµ Ð² ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¸ Ð½Ð¸Ð¶Ðµ)"],
    ["ÐÐ¿Ð°Ñ€Ñ‚Ð°Ð¼ÐµÐ½Ñ‚Ñ‹", "Ð’Ð¸Ð»Ð»Ð°", "Ð—ÐµÐ¼ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÑƒÑ‡Ð°ÑÑ‚Ð¾Ðº", "ÐšÐ¾Ð¼Ð¼ÐµÑ€Ñ‡ÐµÑÐºÐ°Ñ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒ", "Ð”Ñ€ÑƒÐ³Ð¾Ðµ (Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÑƒÑ‚Ð¾Ñ‡Ð½Ð¸Ñ‚Ðµ Ð² ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¸ Ð½Ð¸Ð¶Ðµ)"],
    ["Ð”Ð¾ $100,000", "$100,000 - $300,000", "$300,000 - $500,000", "$500,000 - $1,000,000", "Ð‘Ð¾Ð»ÐµÐµ $1,000,000"],
    ["ÐšÑƒÑ‚Ð°", "Ð¡ÐµÐ¼Ð¸Ð½ÑŒÑÐº", "Ð§Ð°Ð½Ð³Ñƒ", "Ð£Ð±ÑƒÐ´", "Ð”Ð¶Ð¸Ð¼Ð±Ð°Ñ€Ð°Ð½", "Ð”Ñ€ÑƒÐ³Ð¸Ðµ Ñ€Ð°Ð¹Ð¾Ð½Ñ‹ (Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÑƒÑ‚Ð¾Ñ‡Ð½Ð¸Ñ‚Ðµ Ð² ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¸ Ð½Ð¸Ð¶Ðµ)"],
    ["Ð”Ð¾ 5% Ð³Ð¾Ð´Ð¾Ð²Ñ‹Ñ…", "5-10% Ð³Ð¾Ð´Ð¾Ð²Ñ‹Ñ…", "10-15% Ð³Ð¾Ð´Ð¾Ð²Ñ‹Ñ…", "Ð‘Ð¾Ð»ÐµÐµ 15% Ð³Ð¾Ð´Ð¾Ð²Ñ‹Ñ…", "Ð¢Ñ€ÑƒÐ´Ð½Ð¾ ÑÐºÐ°Ð·Ð°Ñ‚ÑŒ, Ñ€Ð°ÑÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÑŽ Ð½Ð° Ð²Ð°ÑˆÑƒ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ Ð² Ð¾Ñ†ÐµÐ½ÐºÐµ"],
    ["Ð’ Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ðµ Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐ¸Ñ… 3 Ð¼ÐµÑÑÑ†ÐµÐ²", "Ð’ Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ðµ 6 Ð¼ÐµÑÑÑ†ÐµÐ²", "Ð’ Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ðµ Ð³Ð¾Ð´Ð°", "Ð‘Ð¾Ð»ÐµÐµ Ð³Ð¾Ð´Ð°"],
    ["Ð”Ð° (Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÑƒÑ‚Ð¾Ñ‡Ð½Ð¸Ñ‚Ðµ Ð² ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¸ Ð½Ð¸Ð¶Ðµ)", "ÐÐµÑ‚"],
    ["Ð‘Ð°Ð½ÐºÐ¾Ð²ÑÐºÐ¸Ð¹ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´", "ÐšÑ€Ð¸Ð¿Ñ‚Ð¾Ð²Ð°Ð»ÑŽÑ‚Ð°", "ÐžÐ¿Ð»Ð°Ñ‚Ð° Ð½Ð°Ð»Ð¸Ñ‡Ð½Ñ‹Ð¼Ð¸"],
    ["Ð Ð°ÑÑÑ€Ð¾Ñ‡ÐºÐ°", "ÐŸÐ¾Ð»Ð½Ð°Ñ ÑÑƒÐ¼Ð¼Ð°"]
];

// Handling incoming messages
client.on('message', async (msg) => {
    const chatId = msg.from;
    console.log(`Received message from ${chatId}: ${msg.body}`);

    // Example: Reply to a specific message
    if (msg.body.toLowerCase() === 'start' || msg.body.toLowerCase() === 'ÑÑ‚Ð°Ñ€Ñ‚') {
        try {
            userStates[chatId] = { state: 'main_menu', question: '' };
            const introText =
                "ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÐµÐ¼ Ð²Ð°Ñ Ð² ÐÐ â€œCondor Real Estatesâ€!\n\n" +
                "ÐœÑ‹ Ñ€Ð°Ð´Ñ‹ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ Ð²Ð°Ñ Ð² Ð½Ð°ÑˆÐµÐ¼ WhatsApp-Ð±Ð¾Ñ‚Ðµ! ÐÐ°ÑˆÐ° Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ†Ð¸Ð¾Ð½Ð½Ð°Ñ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ñ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ð½Ð° Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð½Ð° Ð‘Ð°Ð»Ð¸, Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÑ Ð²Ð°Ð¼ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸ Ð´Ð»Ñ Ð²Ñ‹Ð³Ð¾Ð´Ð½Ñ‹Ñ… Ð²Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹ Ð² Ð¾Ð´Ð¸Ð½ Ð¸Ð· ÑÐ°Ð¼Ñ‹Ñ… Ð¶Ð¸Ð²Ð¾Ð¿Ð¸ÑÐ½Ñ‹Ñ… ÑƒÐ³Ð¾Ð»ÐºÐ¾Ð² Ð¼Ð¸Ñ€Ð°.\n\n" +
                "ÐœÑ‹ Ð¿Ñ€ÐµÐ´Ð»Ð°Ð³Ð°ÐµÐ¼ ÑˆÐ¸Ñ€Ð¾ÐºÐ¸Ð¹ ÑÐ¿ÐµÐºÑ‚Ñ€ ÑƒÑÐ»ÑƒÐ³, Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ Ð¿Ð¾ÐºÑƒÐ¿ÐºÑƒ, Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ñƒ Ð¸ Ð°Ñ€ÐµÐ½Ð´Ñƒ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸, Ð° Ñ‚Ð°ÐºÐ¶Ðµ ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ†Ð¸ÑÐ¼ Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸ÑŽ Ð¾Ð±ÑŠÐµÐºÑ‚Ð°Ð¼Ð¸. ÐÐ°ÑˆÐ¸ ÑÐºÑÐ¿ÐµÑ€Ñ‚Ñ‹ Ð²ÑÐµÐ³Ð´Ð° Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ Ð²Ð°Ð¼ Ð½Ð°Ð¹Ñ‚Ð¸ Ð½Ð°Ð¸Ð»ÑƒÑ‡ÑˆÐ¸Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ Ð´Ð»Ñ Ð´Ð¾ÑÑ‚Ð¸Ð¶ÐµÐ½Ð¸Ñ Ð²Ð°ÑˆÐ¸Ñ… Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ñ… Ñ†ÐµÐ»ÐµÐ¹.\n\n" +
                "Ð¡ Ñ‡ÐµÐ³Ð¾ Ð²Ð°Ð¼ Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ â‰ï¸\n" +
                "âž¡ï¸ÐŸÑ€Ð¾Ð¹Ñ‚Ð¸ Ð¾Ð¿Ñ€Ð¾Ñ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¼Ñ‹ ÑÐ¼Ð¾Ð³Ð»Ð¸ Ð¿Ð¾Ð´Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð²Ð°Ð¼ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¿Ð¾Ð´ Ð²Ð°Ñˆ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð¸ Ð²Ñ‹ Ð½Ð°Ð³Ð»ÑÐ´Ð½Ð¾ ÑƒÐ²Ð¸Ð´ÐµÐ»Ð¸, Ñ‡Ñ‚Ð¾ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð½Ð° Ð²Ð°Ñˆ Ð±ÑŽÐ´Ð¶ÐµÑ‚.\nâž¡ï¸Ð¡Ð»ÐµÐ´Ð¸Ñ‚Ðµ Ð·Ð° Ð½Ð°ÑˆÐ¸Ð¼Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸ÑÐ¼Ð¸, Ð¿Ð¾Ð»ÑƒÑ‡Ð°Ð¹Ñ‚Ðµ Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½ÑƒÑŽ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾ Ð½Ð¾Ð²Ñ‹Ñ… Ð¾Ð±ÑŠÐµÐºÑ‚Ð°Ñ… Ð¸ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸ÑÑ…, Ð° Ñ‚Ð°ÐºÐ¶Ðµ Ð·Ð°Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ â€” Ð¼Ñ‹ Ð²ÑÐµÐ³Ð´Ð° Ð½Ð° ÑÐ²ÑÐ·Ð¸ Ð¸ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ!\n\n" +
                "Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾, Ñ‡Ñ‚Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ð»Ð¸ Ð½Ð°Ñ. Ð”Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð²Ð¼ÐµÑÑ‚Ðµ ÑÐ¾Ð·Ð´Ð°Ð´Ð¸Ð¼ Ð’Ð°ÑˆÐµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ðµ Ð±ÑƒÐ´ÑƒÑ‰ÐµÐµ Ð½Ð° Ð‘Ð°Ð»Ð¸!\n\n" +
                "â¬‡ï¸Ð¡Ð´ÐµÐ»Ð°Ð¹Ñ‚Ðµ ÑÐ²Ð¾Ð¹ Ð²Ñ‹Ð±Ð¾Ñ€â¬‡ï¸";

            const menuText =
                "1. ÐÐ½ÐºÐµÑ‚Ð°\n" +
                "2. Ð­ÐºÑÐ¿ÐµÑ€Ñ‚Ð½Ð°Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ Ñ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒÑŽ\n" +
                "3. [Ðž Ð½Ð°Ñ](https://t.me)\n" +
                "4. Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸ Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ\n\n" +
                "ÐžÑ‚Ð²ÐµÑ‚ÑŒÑ‚Ðµ Ð½Ð° ÑÑ‚Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ñ Ð½Ð¾Ð¼ÐµÑ€Ð¾Ð¼ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð°, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ.";

            await await client.sendMessage(chatId, introText);
            await await client.sendMessage(chatId, menuText);
        } catch (error) {
            await console.log(userStates[chatId]);
            await console.log("ERROR SENDING - " + error);
        }
    } else if (userStates[chatId].state === 'main_menu' && msg.body === "1") {
        userStates[chatId].state = "questionaire";
        userStates[chatId].question = "1";
        const messageIntro = `
ðŸŒŸ *Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ð½Ð°Ñˆ Ð¾Ð¿Ñ€Ð¾ÑÐ½Ð¸Ðº!* ðŸŒŸ

Ð’Ñ‹ ÑÐµÐ¹Ñ‡Ð°Ñ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚Ðµ Ð¾Ð¿Ñ€Ð¾Ñ, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð²Ð°Ð¼ Ð±ÑƒÐ´ÑƒÑ‚ Ð·Ð°Ð´Ð°Ð½Ñ‹ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ñ Ð¿Ñ€Ð¾Ð½ÑƒÐ¼ÐµÑ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¼Ð¸ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð°Ð¼Ð¸ Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð². ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¾Ñ‚Ð²ÐµÑ‡Ð°Ð¹Ñ‚Ðµ, Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð¾Ð¼ÐµÑ€ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð²Ñ‹Ð±Ð¾Ñ€Ð°. 

Ð•ÑÐ»Ð¸ Ð² Ð¾Ð¿Ñ€Ð¾ÑÐµ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ñ Ð¿Ñ€Ð¾ÑÑŒÐ±Ð¾Ð¹ "*ÑƒÑ‚Ð¾Ñ‡Ð½Ð¸Ñ‚Ðµ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð² Ñ‡Ð°Ñ‚Ðµ*", Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð² Ñ‡Ð°Ñ‚ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð¾Ñ‚Ð²ÐµÑ‚Ð°.

Ð’Ð°ÑˆÐµ ÑƒÑ‡Ð°ÑÑ‚Ð¸Ðµ Ð¿Ð¾Ð¼Ð¾Ð¶ÐµÑ‚ Ð½Ð°Ð¼ Ð»ÑƒÑ‡ÑˆÐµ Ð¿Ð¾Ð½ÑÑ‚ÑŒ Ð²Ð°ÑˆÐ¸ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð½Ð¾ÑÑ‚Ð¸ Ð¸ Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð²Ð°Ð¼ Ð½Ð°Ð¸Ð±Ð¾Ð»ÐµÐµ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‰ÑƒÑŽ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ. Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾ Ð·Ð° Ð²Ð°ÑˆÐµ Ð²Ñ€ÐµÐ¼Ñ Ð¸ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ!
    `;

        await client.sendMessage(chatId, messageIntro, { parse_mode: 'Markdown' });
        await sendQuestion(chatId, questions[0], options[0]);
    } else if (userStates[chatId].state === 'main_menu' && msg.body === "2") {
        await client.sendMessage(msg.from,
            '*Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Condor Real Estates.*\n\n' +
            'ÐœÑ‹ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ÑÑ Ð½Ð° Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ†Ð¸ÑÑ… Ð² Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð½Ð° Ð‘Ð°Ð»Ð¸ Ð¸ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ Ð²Ð°Ð¼ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð²Ñ‹Ð±Ð¾Ñ€. ' +
            'ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð·Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ ÑÐ²Ð¾Ð¸ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ð°ÑˆÐ¸ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸ÑÑ‚Ñ‹ Ð¼Ð¾Ð³Ð»Ð¸ ÑÐ²ÑÐ·Ð°Ñ‚ÑŒÑÑ Ñ Ð²Ð°Ð¼Ð¸ Ð¸ Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð²ÑÑŽ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼ÑƒÑŽ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ.\n\n' +
            'Ð’Ð°ÑˆÐ¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð±ÑƒÐ´ÑƒÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð¸ÑÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð´Ð»Ñ ÑÐ²ÑÐ·Ð¸ Ñ Ð²Ð°Ð¼Ð¸ Ð¸ Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ð¹ Ð¿Ð¾ Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ†Ð¸ÑÐ¼ Ð² Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒ.',
            { parse_mode: 'Markdown' }
        );

        await client.sendMessage(chatId,
            '*ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÑƒÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð°Ð´Ñ€ÐµÑ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ñ‡Ñ‚Ñ‹:*',
            { parse_mode: 'Markdown' }
        );
        userStates[chatId].state = 'expert_help';
        userStates[chatId].question = 'email';
    } else if (userStates[chatId].state === 'main_menu' && msg.body === "3") {
        const aboutUsText = `*Ðž Ð½Ð°Ñ*\n\n` +
            `Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Condor Real Estates! ÐœÑ‹ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ÑÑ Ð½Ð° Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ†Ð¸ÑÑ… Ð² Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð½Ð° Ð‘Ð°Ð»Ð¸, Ð¿Ð¾Ð¼Ð¾Ð³Ð°Ñ Ð½Ð°ÑˆÐ¸Ð¼ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°Ð¼ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð²Ñ‹Ð³Ð¾Ð´Ð½Ñ‹Ðµ Ð¸ Ð¿Ñ€Ð¾Ð´ÑƒÐ¼Ð°Ð½Ð½Ñ‹Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ.\n\n` +
            `Ð£Ð·Ð½Ð°Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð¾ Ð½Ð°Ñ Ð¸ Ð½Ð°ÑˆÐ¸Ñ… ÑƒÑÐ»ÑƒÐ³Ð°Ñ… Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð½Ð° Ð½Ð°ÑˆÐµÐ¼ ÑÐ°Ð¹Ñ‚Ðµ: https://www.example.com.\n\n` +
            `ÐœÑ‹ ÑÑ‚Ñ€ÐµÐ¼Ð¸Ð¼ÑÑ Ð¾Ð±ÐµÑÐ¿ÐµÑ‡Ð¸Ñ‚ÑŒ Ð²Ð°Ñ Ð²ÑÐµÐ¹ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾Ð¹ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÐµÐ¹ Ð´Ð»Ñ ÑƒÑÐ¿ÐµÑˆÐ½Ñ‹Ñ… Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ†Ð¸Ð¹ Ð¸ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹ Ð¾Ñ‚Ð²ÐµÑ‚Ð¸Ñ‚ÑŒ Ð½Ð° Ð»ÑŽÐ±Ñ‹Ðµ Ð²Ð°ÑˆÐ¸ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹.\n\n` +
            `Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸ÑÑ…, Ð¸Ð»Ð¸ Ð¿Ð¾ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð´Ñ€ÑƒÐ³Ð¸Ð¼Ð¸ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑÐ¼Ð¸ Ð±Ð¾Ñ‚Ð°, Ñ‚Ð¾ Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð¾Ð¼ÐµÑ€ Ð¸ÑÑ‚ÐµÑ€ÐµÑÑƒÐµÐ¼Ð¾Ð³Ð¾ Ð¿ÑƒÐ½ÐºÑ‚Ð° Ð¼ÐµÐ½ÑŽ Ð² Ñ‡Ð°Ñ‚:\n` +
            `1. ÐÐ½ÐºÐµÑ‚Ð°\n` +
            `2. Ð­ÐºÑÐ¿ÐµÑ€Ñ‚Ð½Ð°Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ Ñ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒÑŽ\n` +
            `4. Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸ Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ`;
        await client.sendMessage(msg.from, aboutUsText, { parse_mode: 'Markdown' });
    } else if (userStates[chatId].state === 'main_menu' && msg.body === "4") {
        userStates[chatId].state = 'strategy_menu';
        const strategiesText =
            'Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸ Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð² Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð½Ð° Ð‘Ð°Ð»Ð¸\n\n' +
            '1. Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð°Ñ€ÐµÐ½Ð´Ñ‹\n' +
            '2. Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸\n' +
            '3. ÐÑ€ÐµÐ½Ð´Ð° Ñ Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶ÐµÐ¹\n\n' +
            'â¬‡ï¸Ð§Ñ‚Ð¾Ð±Ñ‹ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð¾ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ð¸Ð· ÑÑ‚Ð¸Ñ… ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¹, Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¹ Ð½Ð¾Ð¼ÐµÑ€â¬‡ï¸';

        await client.sendMessage(chatId, strategiesText);

    } else if (userStates[chatId].state === 'strategy_menu') {
        const messageText = msg.body.trim();
        if (messageText === "1") {
            await client.sendMessage(chatId,
                "*1. Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð°Ñ€ÐµÐ½Ð´Ñ‹*\n\n" +
                "*ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:* Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð°Ñ€ÐµÐ½Ð´Ñ‹ Ð¿Ñ€ÐµÐ´Ð¿Ð¾Ð»Ð°Ð³Ð°ÐµÑ‚ Ð¿Ð¾ÐºÑƒÐ¿ÐºÑƒ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ñ Ñ†ÐµÐ»ÑŒÑŽ ÐµÑ‘ Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ ÑÐ´Ð°Ñ‡Ð¸ Ð² Ð°Ñ€ÐµÐ½Ð´Ñƒ Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ñ€ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ð¾Ð³Ð¾ Ð´Ð¾Ñ…Ð¾Ð´Ð°. Ð­Ñ‚Ð¾Ñ‚ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ Ð¿Ð¾Ð´Ñ…Ð¾Ð´Ð¸Ñ‚ Ð´Ð»Ñ Ð¸Ð½Ð²ÐµÑÑ‚Ð¾Ñ€Ð¾Ð², ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¸Ñ‰ÑƒÑ‚ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¸ Ð¿Ñ€ÐµÐ´ÑÐºÐ°Ð·ÑƒÐµÐ¼Ñ‹Ð¹ Ð´Ð¾Ñ…Ð¾Ð´ Ð¾Ñ‚ ÑÐ²Ð¾ÐµÐ³Ð¾ Ð²Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ.\n\n" +
                "*ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:*\n    â€¢ Ð ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ñ‹Ð¹ Ð¿Ð¾Ñ‚Ð¾Ðº Ð´Ð¾Ñ…Ð¾Ð´Ð¾Ð² Ð¾Ñ‚ Ð°Ñ€ÐµÐ½Ð´Ñ‹.\n    â€¢ Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ ÑƒÐ²ÐµÐ»Ð¸Ñ‡ÐµÐ½Ð¸Ñ Ð°Ñ€ÐµÐ½Ð´Ð½Ð¾Ð¹ Ð¿Ð»Ð°Ñ‚Ñ‹ Ð² Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ñ‚ Ñ€Ñ‹Ð½Ð¾Ñ‡Ð½Ñ‹Ñ… ÑƒÑÐ»Ð¾Ð²Ð¸Ð¹.\n    â€¢ ÐÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð¾ÑÑ‚Ð°ÐµÑ‚ÑÑ Ð² ÑÐ¾Ð±ÑÑ‚Ð²ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸, Ñ‡Ñ‚Ð¾ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð²Ð¾ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð¿Ñ€Ð¸Ñ€Ð¾ÑÑ‚Ð¾Ð¼ ÐµÑ‘ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð² Ð±ÑƒÐ´ÑƒÑ‰ÐµÐ¼.\n\n" +
                "*Ð Ð¸ÑÐºÐ¸:*\n    â€¢ ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒÑŽ (Ð¿Ð¾Ð¸ÑÐº Ð°Ñ€ÐµÐ½Ð´Ð°Ñ‚Ð¾Ñ€Ð¾Ð², Ñ‚ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°Ð½Ð¸Ðµ Ð¸ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚).\n    â€¢ Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¿ÐµÑ€Ð¸Ð¾Ð´Ð¾Ð² Ð±ÐµÐ· Ð°Ñ€ÐµÐ½Ð´Ð°Ñ‚Ð¾Ñ€Ð¾Ð².\n    â€¢ Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ñ€Ñ‹Ð½Ð¾Ñ‡Ð½Ñ‹Ñ… ÑƒÑÐ»Ð¾Ð²Ð¸Ð¹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¼Ð¾Ð³ÑƒÑ‚ Ð¿Ð¾Ð²Ð»Ð¸ÑÑ‚ÑŒ Ð½Ð° ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð°Ñ€ÐµÐ½Ð´Ð½Ð¾Ð¹ Ð¿Ð»Ð°Ñ‚Ñ‹.\n\n" +
                "*ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ñ€Ð°ÑÑ‡ÐµÑ‚Ð°:*\n    â€¢ Ð¦ÐµÐ½Ð° Ð°Ð¿Ð°Ñ€Ñ‚Ð°Ð¼ÐµÐ½Ñ‚Ð¾Ð²: $150,000\n    â€¢ Ð”Ð½ÐµÐ²Ð½Ð°Ñ Ð°Ñ€ÐµÐ½Ð´Ð½Ð°Ñ Ð¿Ð»Ð°Ñ‚Ð°: $120\n    â€¢ Ð¡Ñ€ÐµÐ´Ð½ÑÑ Ð·Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼Ð¾ÑÑ‚ÑŒ: 70% (255 Ð´Ð½ÐµÐ¹ Ð² Ð³Ð¾Ð´Ñƒ)\n    â€¢ Ð“Ð¾Ð´Ð¾Ð²Ð¾Ð¹ Ð´Ð¾Ñ…Ð¾Ð´: 255 Ð´Ð½ÐµÐ¹ * $120 = $30,600\n    â€¢ Ð“Ð¾Ð´Ð¾Ð²Ñ‹Ðµ Ñ€Ð°ÑÑ…Ð¾Ð´Ñ‹ Ð½Ð° Ð¾Ð±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°Ð½Ð¸Ðµ (10%): $3,060\n    â€¢ Ð§Ð¸ÑÑ‚Ñ‹Ð¹ Ð³Ð¾Ð´Ð¾Ð²Ð¾Ð¹ Ð´Ð¾Ñ…Ð¾Ð´: $27,540\n    â€¢ Ð“Ð¾Ð´Ð¾Ð²Ð°Ñ Ð´Ð¾Ñ…Ð¾Ð´Ð½Ð¾ÑÑ‚ÑŒ: 18.36%\n\n",
                { parse_mode: 'Markdown' }
            );
            await client.sendMessage(chatId,
                "Ð’Ñ‹ Ð¾Ð·Ð½Ð°ÐºÐ¾Ð¼Ð¸Ð»Ð¸ÑÑŒ ÑÐ¾ *Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸ÐµÐ¹ Ð°Ñ€ÐµÐ½Ð´Ñ‹*.\n\n" +
                "*ÐžÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸:*\n" +
                "2. *Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸*\n" +
                "3. *ÐÑ€ÐµÐ½Ð´Ð° Ñ Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶ÐµÐ¹*\n\n" +
                "Ð”Ð»Ñ Ð²Ñ‹Ð±Ð¾Ñ€Ð° Ð´Ñ€ÑƒÐ³Ð¾Ð¹ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð½Ð¾Ð¼ÐµÑ€ (2 Ð¸Ð»Ð¸ 3).\n" +
                "Ð”Ð»Ñ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ Ð² Ð³Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ 'ÑÑ‚Ð°Ñ€Ñ‚'."
            );
        } else if (messageText === "2") {
            await client.sendMessage(chatId,
                "*2. Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸*\n\n" +
                "*ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:* Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸ Ð¿Ñ€ÐµÐ´Ð¿Ð¾Ð»Ð°Ð³Ð°ÐµÑ‚ Ð¿Ð¾ÐºÑƒÐ¿ÐºÑƒ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ñ Ñ†ÐµÐ»ÑŒÑŽ ÐµÑ‘ Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸ Ð¿Ð¾ Ð±Ð¾Ð»ÐµÐµ Ð²Ñ‹ÑÐ¾ÐºÐ¾Ð¹ Ñ†ÐµÐ½Ðµ. Ð­Ñ‚Ð¾ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ Ð´Ð»Ñ Ð¸Ð½Ð²ÐµÑÑ‚Ð¾Ñ€Ð¾Ð², ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¸Ñ‰ÑƒÑ‚ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ ÐµÐ´Ð¸Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ Ð¿Ñ€Ð¸Ð±Ñ‹Ð»Ð¸ Ð¾Ñ‚ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸.\n\n" +
                "*ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:*\n    â€¢ Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð³Ð¾ ÑƒÐ²ÐµÐ»Ð¸Ñ‡ÐµÐ½Ð¸Ñ ÐºÐ°Ð¿Ð¸Ñ‚Ð°Ð»Ð° Ð¿Ñ€Ð¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¹ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶Ðµ.\n    â€¢ ÐÐµÑ‚ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð² ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¸ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒÑŽ Ð² Ð´Ð¾Ð»Ð³Ð¾ÑÑ€Ð¾Ñ‡Ð½Ð¾Ð¹ Ð¿ÐµÑ€ÑÐ¿ÐµÐºÑ‚Ð¸Ð²Ðµ.\n\n" +
                "*Ð Ð¸ÑÐºÐ¸:*\n    â€¢ Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÑŒ Ð¾Ñ‚ Ñ€Ñ‹Ð½Ð¾Ñ‡Ð½Ñ‹Ñ… ÑƒÑÐ»Ð¾Ð²Ð¸Ð¹ Ð¸ ÐºÐ¾Ð»ÐµÐ±Ð°Ð½Ð¸Ð¹ Ñ†ÐµÐ½ Ð½Ð° Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒ.\n    â€¢ Ð Ð°ÑÑ…Ð¾Ð´Ñ‹ Ð½Ð° Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ñƒ (ÐºÐ¾Ð¼Ð¸ÑÑÐ¸Ð¸, Ð½Ð°Ð»Ð¾Ð³Ð¸ Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ðµ ÑÐ±Ð¾Ñ€Ñ‹).\n    â€¢ Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ñ‹Ðµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð·Ð°Ñ‚Ñ€Ð°Ñ‚Ñ‹ Ð½Ð° Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ñƒ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸.\n\n" +
                "*ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ñ€Ð°ÑÑ‡ÐµÑ‚Ð°:*\n    â€¢ Ð¦ÐµÐ½Ð° Ð°Ð¿Ð°Ñ€Ñ‚Ð°Ð¼ÐµÐ½Ñ‚Ð¾Ð²: $150,000\n    â€¢ ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ð°Ñ Ñ†ÐµÐ½Ð° Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸ Ñ‡ÐµÑ€ÐµÐ· Ð³Ð¾Ð´: $172,000\n    â€¢ Ð Ð°ÑÑ…Ð¾Ð´Ñ‹ Ð½Ð° Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ñƒ (5%): $8,600\n    â€¢ Ð§Ð¸ÑÑ‚Ñ‹Ð¹ Ð´Ð¾Ñ…Ð¾Ð´ Ð¾Ñ‚ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸: $13,400\n    â€¢ Ð“Ð¾Ð´Ð¾Ð²Ð°Ñ Ð´Ð¾Ñ…Ð¾Ð´Ð½Ð¾ÑÑ‚ÑŒ: 8.93%\n\n",
                { parse_mode: 'Markdown' }
            );
            await client.sendMessage(chatId,
                "Ð’Ñ‹ Ð¾Ð·Ð½Ð°ÐºÐ¾Ð¼Ð¸Ð»Ð¸ÑÑŒ ÑÐ¾ *Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸ÐµÐ¹ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸*.\n\n" +
                "*ÐžÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸:*\n" +
                "1. *Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð°Ñ€ÐµÐ½Ð´Ñ‹*\n" +
                "3. *ÐÑ€ÐµÐ½Ð´Ð° Ñ Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶ÐµÐ¹*\n\n" +
                "Ð”Ð»Ñ Ð²Ñ‹Ð±Ð¾Ñ€Ð° Ð´Ñ€ÑƒÐ³Ð¾Ð¹ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð½Ð¾Ð¼ÐµÑ€ (1 Ð¸Ð»Ð¸ 3).\n" +
                "Ð”Ð»Ñ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ Ð² Ð³Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ 'ÑÑ‚Ð°Ñ€Ñ‚'."
            );
        } else if (messageText === "3") {
            await client.sendMessage(chatId,
                "*3. ÐÑ€ÐµÐ½Ð´Ð° Ñ Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶ÐµÐ¹*\n\n" +
                "*ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:* ÐšÐ¾Ð¼Ð±Ð¸Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð²ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ Ð² ÑÐµÐ±Ñ ÑÐ´Ð°Ñ‡Ñƒ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð² Ð°Ñ€ÐµÐ½Ð´Ñƒ Ð½Ð° Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð½Ñ‹Ð¹ Ð¿ÐµÑ€Ð¸Ð¾Ð´ Ñ Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ Ð¿Ñ€Ð¾Ð´Ð°Ð¶ÐµÐ¹. Ð­Ñ‚Ð¾Ñ‚ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð¸Ð½Ð²ÐµÑÑ‚Ð¾Ñ€Ñƒ Ð¿Ð¾Ð»ÑƒÑ‡Ð°Ñ‚ÑŒ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ Ð´Ð¾Ñ…Ð¾Ð´ Ð¾Ñ‚ Ð°Ñ€ÐµÐ½Ð´Ñ‹, Ð° Ð·Ð°Ñ‚ÐµÐ¼ Ð¸Ð·Ð²Ð»ÐµÑ‡ÑŒ Ð¿Ñ€Ð¸Ð±Ñ‹Ð»ÑŒ Ð¾Ñ‚ Ð¿Ñ€Ð¸Ñ€Ð¾ÑÑ‚Ð° ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸.\n\n" +
                "*ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:*\n    â€¢ Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð´Ð²Ð¾Ð¹Ð½Ð¾Ð³Ð¾ Ð´Ð¾Ñ…Ð¾Ð´Ð°: Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð¾Ñ‚ Ð°Ñ€ÐµÐ½Ð´Ñ‹ Ð¸ ÐºÐ°Ð¿Ð¸Ñ‚Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¾Ñ‚ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸.\n    â€¢ Ð‘Ð¾Ð»ÐµÐµ Ð²Ñ‹ÑÐ¾ÐºÐ°Ñ ÑÐ¾Ð²Ð¾ÐºÑƒÐ¿Ð½Ð°Ñ Ð´Ð¾Ñ…Ð¾Ð´Ð½Ð¾ÑÑ‚ÑŒ.\n\n" +
                "*Ð Ð¸ÑÐºÐ¸:*\n    â€¢ ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒÑŽ Ð½Ð° ÑÑ‚Ð°Ð¿Ðµ Ð°Ñ€ÐµÐ½Ð´Ñ‹.\n    â€¢ Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ñ‹Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ñ€Ñ‹Ð½Ð¾Ñ‡Ð½Ñ‹Ñ… ÑƒÑÐ»Ð¾Ð²Ð¸Ð¹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¼Ð¾Ð³ÑƒÑ‚ Ð¿Ð¾Ð²Ð»Ð¸ÑÑ‚ÑŒ ÐºÐ°Ðº Ð½Ð° Ð°Ñ€ÐµÐ½Ð´Ð½ÑƒÑŽ Ð¿Ð»Ð°Ñ‚Ñƒ, Ñ‚Ð°Ðº Ð¸ Ð½Ð° Ñ†ÐµÐ½Ñƒ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸.\n    â€¢ Ð Ð°ÑÑ…Ð¾Ð´Ñ‹ Ð½Ð° Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ñƒ (ÐºÐ¾Ð¼Ð¸ÑÑÐ¸Ð¸, Ð½Ð°Ð»Ð¾Ð³Ð¸ Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ðµ ÑÐ±Ð¾Ñ€Ñ‹).\n\n" +
                "*ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ñ€Ð°ÑÑ‡ÐµÑ‚Ð°:*\n    â€¢ Ð¦ÐµÐ½Ð° Ð°Ð¿Ð°Ñ€Ñ‚Ð°Ð¼ÐµÐ½Ñ‚Ð¾Ð²: $150,000\n    â€¢ Ð”Ð½ÐµÐ²Ð½Ð°Ñ Ð°Ñ€ÐµÐ½Ð´Ð½Ð°Ñ Ð¿Ð»Ð°Ñ‚Ð°: $120\n    â€¢ Ð¡Ñ€ÐµÐ´Ð½ÑÑ Ð·Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼Ð¾ÑÑ‚ÑŒ: 70% (255 Ð´Ð½ÐµÐ¹ Ð² Ð³Ð¾Ð´Ñƒ)\n    â€¢ Ð“Ð¾Ð´Ð¾Ð²Ð¾Ð¹ Ð´Ð¾Ñ…Ð¾Ð´ Ð¾Ñ‚ Ð°Ñ€ÐµÐ½Ð´Ñ‹: $27,540\n    â€¢ ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ð°Ñ Ñ†ÐµÐ½Ð° Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸ Ñ‡ÐµÑ€ÐµÐ· Ð³Ð¾Ð´: $172,000\n    â€¢ Ð Ð°ÑÑ…Ð¾Ð´Ñ‹ Ð½Ð° Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ñƒ (5%): $8,600\n    â€¢ Ð§Ð¸ÑÑ‚Ñ‹Ð¹ Ð´Ð¾Ñ…Ð¾Ð´ Ð¾Ñ‚ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸: $13,400\n    â€¢ Ð¡Ð¾Ð²Ð¾ÐºÑƒÐ¿Ð½Ñ‹Ð¹ Ð³Ð¾Ð´Ð¾Ð²Ð¾Ð¹ Ð´Ð¾Ñ…Ð¾Ð´: $40,940\n    â€¢ Ð¡Ð¾Ð²Ð¾ÐºÑƒÐ¿Ð½Ð°Ñ Ð³Ð¾Ð´Ð¾Ð²Ð°Ñ Ð´Ð¾Ñ…Ð¾Ð´Ð½Ð¾ÑÑ‚ÑŒ: 27.29%\n\n",
                { parse_mode: 'Markdown' }
            );
            await client.sendMessage(chatId,
                "Ð’Ñ‹ Ð¾Ð·Ð½Ð°ÐºÐ¾Ð¼Ð¸Ð»Ð¸ÑÑŒ ÑÐ¾ *ÐÑ€ÐµÐ½Ð´Ð° Ñ Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶ÐµÐ¹*.\n\n" +
                "*ÐžÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸:*\n" +
                "1. *Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð°Ñ€ÐµÐ½Ð´Ñ‹*\n" +
                "2. *Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸*\n\n" +
                "Ð”Ð»Ñ Ð²Ñ‹Ð±Ð¾Ñ€Ð° Ð´Ñ€ÑƒÐ³Ð¾Ð¹ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð½Ð¾Ð¼ÐµÑ€ (1 Ð¸Ð»Ð¸ 2).\n" +
                "Ð”Ð»Ñ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ Ð² Ð³Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ 'ÑÑ‚Ð°Ñ€Ñ‚'."
            );
        } else {
            await client.sendMessage(chatId, 'ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð²Ñ‹Ð±Ð¾Ñ€. ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð½Ð¾Ð¼ÐµÑ€ Ð¾Ñ‚ 1 Ð´Ð¾ 3 Ð´Ð»Ñ Ð²Ñ‹Ð±Ð¾Ñ€Ð° ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸.');
        }
    } else if (userStates[chatId].state === 'questionaire') {
        if (userStates[chatId].question === "1") {
            if (msg.body.trim() === "1") {
                questionnaireAnswer[chatId] = { answer1: options[0][1] };
            } else if (msg.body.trim() === "2") {
                questionnaireAnswer[chatId] = { answer1: options[0][2] };
            } else if (msg.body.trim() === "3") {
                questionnaireAnswer[chatId] = { answer1: options[0][3] };
            } else {
                questionnaireAnswer[chatId] = { answer1: msg.body };
            }
            userStates[chatId].question = "2";
            await sendQuestion(chatId, questions[1], options[1]);
        } else if (userStates[chatId].question === "2") {
            if (msg.body.trim() === "1") {
                questionnaireAnswer[chatId].answer2 = options[1][0];
            } else if (msg.body.trim() === "2") {
                questionnaireAnswer[chatId].answer2 = options[1][1];
            } else if (msg.body.trim() === "3") {
                questionnaireAnswer[chatId].answer2 = options[1][2];
            } else if (msg.body.trim() === "4") {
                questionnaireAnswer[chatId].answer2 = options[1][3];
            } else {
                questionnaireAnswer[chatId].answer2 = msg.body;
            }
            userStates[chatId].question = "3";
            await sendQuestion(chatId, questions[2], options[2]);
        } else if (userStates[chatId].question === "3") {
            if (msg.body.trim() === "1") {
                questionnaireAnswer[chatId].answer3 = options[2][0];
            } else if (msg.body.trim() === "2") {
                questionnaireAnswer[chatId].answer3 = options[2][1];
            } else if (msg.body.trim() === "3") {
                questionnaireAnswer[chatId].answer3 = options[2][2];
            } else if (msg.body.trim() === "4") {
                questionnaireAnswer[chatId].answer3 = options[2][3];
            } else if (msg.body.trim() === "5") {
                questionnaireAnswer[chatId].answer3 = options[2][4];
            } else {
                questionnaireAnswer[chatId].answer3 = msg.body;
            }
            userStates[chatId].question = "4";
            await sendQuestion(chatId, questions[3], options[3]);
        } else if (userStates[chatId].question === "4") {
            if (msg.body.trim() === "1") {
                questionnaireAnswer[chatId].answer4 = options[3][0];
            } else if (msg.body.trim() === "2") {
                questionnaireAnswer[chatId].answer4 = options[3][1];
            } else if (msg.body.trim() === "3") {
                questionnaireAnswer[chatId].answer4 = options[3][2];
            } else if (msg.body.trim() === "4") {
                questionnaireAnswer[chatId].answer4 = options[3][3];
            } else if (msg.body.trim() === "5") {
                questionnaireAnswer[chatId].answer4 = options[3][4];
            } else {
                questionnaireAnswer[chatId].answer4 = msg.body;
            }
            userStates[chatId].question = "5";
            await sendQuestion(chatId, questions[4], options[4]);
        } else if (userStates[chatId].question === "5") {
            if (msg.body.trim() === "1") {
                questionnaireAnswer[chatId].answer5 = options[4][0];
            } else if (msg.body.trim() === "2") {
                questionnaireAnswer[chatId].answer5 = options[4][1];
            } else if (msg.body.trim() === "3") {
                questionnaireAnswer[chatId].answer5 = options[4][2];
            } else if (msg.body.trim() === "4") {
                questionnaireAnswer[chatId].answer5 = options[4][3];
            } else if (msg.body.trim() === "5") {
                questionnaireAnswer[chatId].answer5 = options[4][4];
            } else {
                questionnaireAnswer[chatId].answer5 = msg.body;
            }
            userStates[chatId].question = "6";
            await sendQuestion(chatId, questions[5], options[5]);
        } else if (userStates[chatId].question === "6") {
            if (msg.body.trim() === "1") {
                questionnaireAnswer[chatId].answer6 = options[5][0];
            } else if (msg.body.trim() === "2") {
                questionnaireAnswer[chatId].answer6 = options[5][1];
            } else if (msg.body.trim() === "3") {
                questionnaireAnswer[chatId].answer6 = options[5][2];
            } else if (msg.body.trim() === "4") {
                questionnaireAnswer[chatId].answer6 = options[5][3];
            } else {
                questionnaireAnswer[chatId].answer6 = msg.body;
            }
            userStates[chatId].question = "7";
            await sendQuestion(chatId, questions[6], options[6]);
        } else if (userStates[chatId].question === "7") {
            if (msg.body.trim() === "2") {
                questionnaireAnswer[chatId].answer7 = options[6][1];
            } else {
                questionnaireAnswer[chatId].answer7 = msg.body;
            }
            userStates[chatId].question = "8";
            await sendQuestion(chatId, questions[7], options[7]);
        } else if (userStates[chatId].question === "8") {
            if (msg.body.trim() === "1") {
                questionnaireAnswer[chatId].answer8 = options[7][0];
            } else if (msg.body.trim() === "2") {
                questionnaireAnswer[chatId].answer8 = options[7][1];
            } else if (msg.body.trim() === "3") {
                questionnaireAnswer[chatId].answer8 = options[7][2];
            } else {
                questionnaireAnswer[chatId].answer8 = msg.body;
            }
            userStates[chatId].question = "9";
            await sendQuestion(chatId, questions[8], options[8]);
        } else if (userStates[chatId].question === "9") {
            if (msg.body.trim() === "1") {
                questionnaireAnswer[chatId].answer9 = options[8][0];
            } else if (msg.body.trim() === "2") {
                questionnaireAnswer[chatId].answer9 = options[8][1];
            } else {
                questionnaireAnswer[chatId].answer9 = msg.body;
            }
            userStates[chatId].question = "10";
            await sendQuestion(chatId, questions[9], []);
        } else if (userStates[chatId].question === "10") {
            questionnaireAnswer[chatId].answer10 = msg.body;
            userStates[chatId].question = "11";
            await sendQuestion(chatId, questions[10], []);
        } else if (userStates[chatId].question === "11") {
            questionnaireAnswer[chatId].answer11 = msg.body;
            const message = `ðŸ“ * ÐÐ½ÐºÐµÑ‚Ð° Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð° *\n\n` +
                `1. * Ð¦ÐµÐ»ÑŒ Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ†Ð¸Ð¸ *: ${questionnaireAnswer[chatId].answer1} \n` +
                `2. * Ð¢Ð¸Ð¿ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚Ð¸ *: ${questionnaireAnswer[chatId].answer2} \n` +
                `3. * Ð‘ÑŽÐ´Ð¶ÐµÑ‚ *: ${questionnaireAnswer[chatId].answer3} \n` +
                `4. * ÐŸÑ€ÐµÐ´Ð¿Ð¾Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼Ñ‹Ð¹ Ñ€Ð°Ð¹Ð¾Ð½ *: ${questionnaireAnswer[chatId].answer4} \n` +
                `5. * ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ð°Ñ Ð´Ð¾Ñ…Ð¾Ð´Ð½Ð¾ÑÑ‚ÑŒ *: ${questionnaireAnswer[chatId].answer5} \n` +
                `6. * Ð’Ñ€ÐµÐ¼Ñ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ¸ *: ${questionnaireAnswer[chatId].answer6} \n` +
                `7. * ÐžÑÐ¾Ð±Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ *: ${questionnaireAnswer[chatId].answer7} \n` +
                `8. * Ð¡Ð¿Ð¾ÑÐ¾Ð± Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ *: ${questionnaireAnswer[chatId].answer8} \n` +
                `9. * ÐŸÑ€ÐµÐ´Ð¿Ð¾Ñ‡Ñ‚ÐµÐ½Ð¸Ðµ Ð² Ð¾Ð¿Ð»Ð°Ñ‚Ðµ *: ${questionnaireAnswer[chatId].answer9} \n` +
                `10. * ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ð¸Ð¼Ñ *: ${questionnaireAnswer[chatId].answer10} \n` +
                `11. * ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð½Ñ‹Ð¹ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð° *: ${questionnaireAnswer[chatId].answer11} `;

            await client.sendMessage(process.env.MANAGER_GROUP, message);

            userStates[chatId].state = 'strategy_menu';
            await client.sendMessage(chatId, "Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾ Ð·Ð° Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð°Ð½ÐºÐµÑ‚Ñ‹. ÐœÑ‹ ÑÐºÐ¾Ñ€Ð¾ Ñ Ð²Ð°Ð¼Ð¸ ÑÐ²ÑÐ¶ÐµÐ¼ÑÑ.\n\n Ð§Ñ‚Ð¾Ð±Ñ‹ ÑƒÐ²Ð¸Ð´ÐµÑ‚ÑŒ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸ Ð´Ð¾Ñ…Ð¾Ð´Ð° Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ñ†Ð¸Ñ„Ñ€Ñƒ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð¿ÑƒÐ½ÐºÑ‚Ð° Ð¼ÐµÐ½ÑŽ:\n\n" +
                "1. Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð°Ñ€ÐµÐ½Ð´Ñ‹\n" +
                "2. Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸\n" +
                "3. ÐÑ€ÐµÐ½Ð´Ð° Ñ Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶ÐµÐ¹\n\n" +
                "Ð•ÑÐ»Ð¸ Ð¶Ðµ Ð’Ñ‹ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ Ðº Ð¿ÐµÑ€Ð²Ð¾Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ð¼Ñƒ Ð¼ÐµÐ½ÑŽ, Ñ‚Ð¾ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ 'ÑÑ‚Ð°Ñ€Ñ‚' Ð² Ñ‡Ð°Ñ‚");
            delete questionnaireAnswer[chatId];
        }
    } else if (userStates[chatId].state === 'expert_help') {
        if (userStates[chatId].question === 'email') {
            expertHelpAnswer[chatId] = { email: msg.body };
            await client.sendMessage(chatId,
                '*ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÑƒÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð½Ñ‹Ð¹ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°:*',
                { parse_mode: 'Markdown' }
            );
            userStates[chatId].question = 'phone';
        } else if (userStates[chatId].question === 'phone') {
            expertHelpAnswer[chatId].phone = msg.body;
            await client.sendMessage(chatId,
                '*ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÑƒÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÐµ Ð¤Ð˜Ðž:*',
                { parse_mode: 'Markdown' }
            );
            userStates[chatId].question = 'fio';
        } else if (userStates[chatId].question === 'fio') {
            expertHelpAnswer[chatId].fio = msg.body;
            await client.sendMessage(process.env.MANAGER_GROUP,
                'ðŸ’¡ *Ð¢ÐµÐ¼Ð°:* Ð­ÐºÑÐ¿ÐµÑ€Ñ‚Ð½Ð°Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ Ñ Ð½ÐµÐ´Ð²Ð¸Ð¶Ð¸Ð¼Ð¾ÑÑ‚ÑŒÑŽ\n' +
                'ðŸ“§ *ÐÐ´Ñ€ÐµÑ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ñ‡Ñ‚Ñ‹:* ' + expertHelpAnswer[msg.from].email + '\n' +
                'ðŸ“± *ÐÐ¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°:* ' + expertHelpAnswer[msg.from].phone + '\n' +
                'ðŸ‘¨ðŸ»â€ðŸ’» *Ð¤Ð˜Ðž:* ' + expertHelpAnswer[msg.from].fio,
                { parse_mode: 'Markdown' }
            );
            userStates[chatId].state = 'strategy_menu';
            await client.sendMessage(chatId, "ÐÐ°ÑˆÐ¸ ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ð½Ñ‚Ñ‹ ÑÐ²ÑÐ¶ÑƒÑ‚ÑÑ Ñ Ð²Ð°Ð¼Ð¸ Ð² Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐµÐµ Ð²Ñ€ÐµÐ¼Ñ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð±ÑÑƒÐ´Ð¸Ñ‚ÑŒ Ð²Ð°ÑˆÐ¸ Ñ†ÐµÐ»Ð¸ Ð¸ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶Ð¸Ñ‚ÑŒ Ð½Ð°Ð¸Ð±Ð¾Ð»ÐµÐµ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‰Ð¸Ðµ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹ Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ†Ð¸Ð¹.\n\n Ð§Ñ‚Ð¾Ð±Ñ‹ ÑƒÐ²Ð¸Ð´ÐµÑ‚ÑŒ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸ Ð´Ð¾Ñ…Ð¾Ð´Ð° Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ñ†Ð¸Ñ„Ñ€Ñƒ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð¿ÑƒÐ½ÐºÑ‚Ð° Ð¼ÐµÐ½ÑŽ:\n\n" +
                "1. Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð°Ñ€ÐµÐ½Ð´Ñ‹\n" +
                "2. Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸\n" +
                "3. ÐÑ€ÐµÐ½Ð´Ð° Ñ Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¾Ð´Ð°Ð¶ÐµÐ¹\n\n" +
                "Ð•ÑÐ»Ð¸ Ð¶Ðµ Ð’Ñ‹ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ Ðº Ð¿ÐµÑ€Ð²Ð¾Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ð¼Ñƒ Ð¼ÐµÐ½ÑŽ, Ñ‚Ð¾ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ 'ÑÑ‚Ð°Ñ€Ñ‚' Ð² Ñ‡Ð°Ñ‚");
        }
    }
});

async function sendQuestion(chatId, text, optionss) {
    const optionssText = optionss.map((options, index) => `${index + 1}. ${options} `).join('\n');
    await client.sendMessage(chatId, `${text} \n\n${optionssText} `);
}

// Start the client
// (async () => {
//     browser = await puppeteer.launch({
//         executablePath: process.env.PUPPETEER_EXECUTABLE_PATH,
//         args: [
//             '--no-sandbox', '--disable-setuid-sandbox'
//         ],
//         headless: true,
//     });
//     client.initialize();
// })();

client.initialize();

client.on('qr', async (qr) => {
        console.log('QR RECEIVED');
        qrcode_terminal.generate(qr, { small: true });
});

client.on('authenticated', () => {
    console.log('AUTHENTICATED');
});

client.on('auth_failure', msg => {
    // Fired if session restore was unsuccessful
    console.error('AUTHENTICATION FAILURE', msg);
});

client.on('disconnected', (reason) => {
    console.log('Client was logged out', reason);
})